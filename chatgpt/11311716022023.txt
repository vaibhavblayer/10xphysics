Q. None#ifndef _CACHE_H
#define _CACHE_H

#include <pthread.h>

#include "hash.h"

#define MAX_CACHE_SIZE 1049000
#define MAX_OBJECT_SIZE 102400

typedef struct {
    char path[2048];
    char content[MAX_OBJECT_SIZE];
    size_t size;
} CacheNode;

typedef struct {
    HashTable *hash;
    CacheNode *list;
    int max_size;
    int current_size;
    pthread_rwlock_t lock;
} Cache;

Cache *cache_init(int max_size);
void cache_destroy(Cache *cache);

int cache_get(Cache *cache, const char *path, char *buf);
int cache_set(Cache *cache, const char *path, const char *buf, size_t size);

#endif // _CACHE_H